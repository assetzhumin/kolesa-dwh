# Kolesa.kz Data Warehouse Pipeline - Environment Variables
# Copy this file to .env and update with your actual values
# DO NOT commit .env to version control

# =============================================================================
# PostgreSQL Database Configuration
# =============================================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Warehouse Database (used by dbt and application)
WAREHOUSE_DB=warehouse
WAREHOUSE_USER=warehouse
WAREHOUSE_PASSWORD=warehouse

# Airflow Database
AIRFLOW_USER=airflow
AIRFLOW_PASSWORD=airflow
AIRFLOW_DB=airflow

# =============================================================================
# Airflow Configuration
# =============================================================================
# Executor type: SequentialExecutor (default), LocalExecutor, or CeleryExecutor
AIRFLOW__CORE__EXECUTOR=SequentialExecutor

# Airflow Web UI credentials
AIRFLOW_WEB_USER=admin
AIRFLOW_WEB_PASSWORD=admin

# =============================================================================
# MinIO/S3 Object Storage Configuration
# =============================================================================
MINIO_ENDPOINT=http://minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=bronze

# =============================================================================
# pgAdmin Configuration
# =============================================================================
PGADMIN_PASSWORD=admin

# =============================================================================
# Kolesa.kz Scraping Configuration
# =============================================================================
# Base URL for kolesa.kz website
KOLESA_BASE_URL=https://kolesa.kz

# Maximum number of pages to discover per run
KOLESA_MAX_PAGES=50

# Number of listings to fetch per batch
KOLESA_FETCH_BATCH=200

# Number of concurrent fetch operations
KOLESA_CONCURRENCY=3

# Sleep time between requests (milliseconds) to avoid rate limiting
KOLESA_SLEEP_MIN_MS=800
KOLESA_SLEEP_MAX_MS=2200

# =============================================================================
# Cloud Sink Configuration (Supabase)
# =============================================================================
# Cloud sink type: 'supabase', 'none', or other supported sinks
CLOUD_SINK=supabase

# Supabase connection string (Connection Pooler format)
# Format: postgresql://postgres.xxxxx:YOUR_PASSWORD@aws-0-us-east-1.pooler.supabase.com:6543/postgres
# Get this from: Supabase Dashboard → Settings → Database → Connection string → Connection pooling tab
SUPABASE_DB_URL=

# =============================================================================
# Notes
# =============================================================================
# - For production, change all default passwords
# - Use connection pooler URL (port 6543) for Supabase, not direct connection
# - Set CLOUD_SINK=none to disable cloud data export
# - Adjust KOLESA_* settings based on rate limiting requirements
